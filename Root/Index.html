<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>To Do</title>

    <link href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <link href="/Root/Style.css" rel="stylesheet">

    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
</head>
<body>

<div id="wrapper">

    <div class="add"><i class="material-icons add">add_circle_outline</i> Dodaj zadanie</div>

    <form id="add" method="POST" action="/Root/">
        <input type="hidden" name="action" value="add"/>
        <div class="form-group">
            <label>Nazwa zadania</label>
            <input type="text" name="name"/>
        </div>
        <div class="form-group">
            <label>Opis zadania</label>
            <textarea name="description"></textarea>
        </div>
        <button type="submit">Dodaj</button>
    </form>

    {foreach from=$todos item=todo}
    <div class="todos {if $todo.done}done{/if}">
        <div class="name">
            {if !$todo.done}
            <i class="material-icons check" data-id="{$todo.id}">done</i>
            {/if} {$todo.name}</div>
        <div class="description">{$todo.description}</div>
    </div>
    {/foreach}

</div>

<script>
    $(document).ready(function () {
        $('.add').click(function () {
            $('form#add').css('display', 'block');
            $(this).css('display', 'none');
        });
        $('[type=submit]').click(function () {
            $('form#add').css('display', 'none');
            $(this).css('display', 'block');
        });
        $('.check').click(function () {
            var check = this;
            $.ajax({
                url: "/Root/",
                method: "POST",
                data: {
                    action: 'check',
                    id: $(check).data('id'),
                }
            }).done(function() {
                $(check).parents().parents().eq(0).addClass('done');
                $(check).remove();
            });
        });
    });
</script>

</body>
</html>